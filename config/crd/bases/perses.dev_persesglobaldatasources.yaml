---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.20.0
  name: persesglobaldatasources.perses.dev
spec:
  group: perses.dev
  names:
    kind: PersesGlobalDatasource
    listKind: PersesGlobalDatasourceList
    plural: persesglobaldatasources
    shortNames:
    - pergds
    singular: persesglobaldatasource
  scope: Cluster
  versions:
  - name: v1alpha2
    schema:
      openAPIV3Schema:
        description: PersesGlobalDatasource is the Schema for the PersesGlobalDatasources
          API
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: spec is the desired state of the PersesGlobalDatasource resource
            properties:
              client:
                description: client specifies authentication and TLS configuration
                  for the datasource
                properties:
                  basicAuth:
                    description: basicAuth provides username/password authentication
                      configuration for the Perses client
                    properties:
                      name:
                        description: |-
                          name is the name of the Kubernetes Secret or ConfigMap resource
                          Required when Type is "secret" or "configmap", ignored when Type is "file"
                        minLength: 1
                        type: string
                      namespace:
                        description: |-
                          namespace is the namespace of the Kubernetes Secret or ConfigMap resource
                          Required when Type is "secret" or "configmap", ignored when Type is "file"
                        minLength: 1
                        type: string
                      passwordPath:
                        description: |-
                          passwordPath specifies the key name within the secret/configmap or filesystem path
                          (depending on SecretSource.Type) where the password is stored
                        minLength: 1
                        type: string
                      type:
                        description: type specifies the source type for secret data
                          (secret, configmap, or file)
                        enum:
                        - secret
                        - configmap
                        - file
                        type: string
                      username:
                        description: username is the username credential for basic
                          authentication
                        minLength: 1
                        type: string
                    required:
                    - passwordPath
                    - type
                    - username
                    type: object
                    x-kubernetes-validations:
                    - message: name is required when type is secret or configmap
                      rule: self.type != 'secret' && self.type != 'configmap' || has(self.name)
                    - message: namespace is required when type is secret or configmap
                      rule: self.type != 'secret' && self.type != 'configmap' || has(self.namespace)
                  kubernetesAuth:
                    description: kubernetesAuth enables Kubernetes native authentication
                      for the Perses client
                    properties:
                      enable:
                        description: enable determines whether Kubernetes authentication
                          is enabled for the Perses client
                        type: boolean
                    type: object
                  oauth:
                    description: oauth provides OAuth 2.0 authentication configuration
                      for the Perses client
                    properties:
                      authStyle:
                        description: |-
                          authStyle specifies how the endpoint wants the client ID and client secret sent
                          The zero value means to auto-detect
                        format: int32
                        type: integer
                      clientIDPath:
                        description: |-
                          clientIDPath specifies the key name within the secret/configmap or filesystem path
                          (depending on SecretSource.Type) where the OAuth client ID is stored
                        type: string
                      clientSecretPath:
                        description: |-
                          clientSecretPath specifies the key name within the secret/configmap or filesystem path
                          (depending on SecretSource.Type) where the OAuth client secret is stored
                        type: string
                      endpointParams:
                        additionalProperties:
                          items:
                            type: string
                          type: array
                        description: endpointParams specifies additional parameters
                          to include in requests to the token endpoint
                        type: object
                      name:
                        description: |-
                          name is the name of the Kubernetes Secret or ConfigMap resource
                          Required when Type is "secret" or "configmap", ignored when Type is "file"
                        minLength: 1
                        type: string
                      namespace:
                        description: |-
                          namespace is the namespace of the Kubernetes Secret or ConfigMap resource
                          Required when Type is "secret" or "configmap", ignored when Type is "file"
                        minLength: 1
                        type: string
                      scopes:
                        description: scopes specifies optional requested permissions
                          for the OAuth token
                        items:
                          type: string
                        type: array
                        x-kubernetes-list-type: atomic
                      tokenURL:
                        description: |-
                          tokenURL is the OAuth 2.0 provider's token endpoint URL
                          This is a constant specific to each OAuth provider
                        minLength: 1
                        type: string
                      type:
                        description: type specifies the source type for secret data
                          (secret, configmap, or file)
                        enum:
                        - secret
                        - configmap
                        - file
                        type: string
                    required:
                    - tokenURL
                    - type
                    type: object
                    x-kubernetes-validations:
                    - message: name is required when type is secret or configmap
                      rule: self.type != 'secret' && self.type != 'configmap' || has(self.name)
                    - message: namespace is required when type is secret or configmap
                      rule: self.type != 'secret' && self.type != 'configmap' || has(self.namespace)
                  tls:
                    description: tls provides TLS/SSL configuration for secure connections
                      to Perses
                    properties:
                      caCert:
                        description: caCert specifies the CA certificate to verify
                          the Perses server's certificate
                        properties:
                          certPath:
                            description: |-
                              certPath specifies the key name within the secret/configmap or filesystem path
                              (depending on SecretSource.Type) where the certificate is stored
                            minLength: 1
                            type: string
                          name:
                            description: |-
                              name is the name of the Kubernetes Secret or ConfigMap resource
                              Required when Type is "secret" or "configmap", ignored when Type is "file"
                            minLength: 1
                            type: string
                          namespace:
                            description: |-
                              namespace is the namespace of the Kubernetes Secret or ConfigMap resource
                              Required when Type is "secret" or "configmap", ignored when Type is "file"
                            minLength: 1
                            type: string
                          privateKeyPath:
                            description: |-
                              privateKeyPath specifies the key name within the secret/configmap or filesystem path
                              (depending on SecretSource.Type) where the private key is stored
                              Required for client certificates (UserCert), optional for CA certificates (CaCert)
                            type: string
                          type:
                            description: type specifies the source type for secret
                              data (secret, configmap, or file)
                            enum:
                            - secret
                            - configmap
                            - file
                            type: string
                        required:
                        - certPath
                        - type
                        type: object
                        x-kubernetes-validations:
                        - message: name is required when type is secret or configmap
                          rule: self.type != 'secret' && self.type != 'configmap'
                            || has(self.name)
                        - message: namespace is required when type is secret or configmap
                          rule: self.type != 'secret' && self.type != 'configmap'
                            || has(self.namespace)
                      enable:
                        description: enable determines whether TLS is enabled for
                          connections to Perses
                        type: boolean
                      insecureSkipVerify:
                        description: |-
                          insecureSkipVerify determines whether to skip verification of the Perses server's certificate
                          Setting this to true is insecure and should only be used for testing
                        type: boolean
                      userCert:
                        description: userCert specifies the client certificate and
                          key for mutual TLS (mTLS) authentication
                        properties:
                          certPath:
                            description: |-
                              certPath specifies the key name within the secret/configmap or filesystem path
                              (depending on SecretSource.Type) where the certificate is stored
                            minLength: 1
                            type: string
                          name:
                            description: |-
                              name is the name of the Kubernetes Secret or ConfigMap resource
                              Required when Type is "secret" or "configmap", ignored when Type is "file"
                            minLength: 1
                            type: string
                          namespace:
                            description: |-
                              namespace is the namespace of the Kubernetes Secret or ConfigMap resource
                              Required when Type is "secret" or "configmap", ignored when Type is "file"
                            minLength: 1
                            type: string
                          privateKeyPath:
                            description: |-
                              privateKeyPath specifies the key name within the secret/configmap or filesystem path
                              (depending on SecretSource.Type) where the private key is stored
                              Required for client certificates (UserCert), optional for CA certificates (CaCert)
                            type: string
                          type:
                            description: type specifies the source type for secret
                              data (secret, configmap, or file)
                            enum:
                            - secret
                            - configmap
                            - file
                            type: string
                        required:
                        - certPath
                        - type
                        type: object
                        x-kubernetes-validations:
                        - message: name is required when type is secret or configmap
                          rule: self.type != 'secret' && self.type != 'configmap'
                            || has(self.name)
                        - message: namespace is required when type is secret or configmap
                          rule: self.type != 'secret' && self.type != 'configmap'
                            || has(self.namespace)
                    type: object
                type: object
              config:
                description: config specifies the Perses datasource configuration
                properties:
                  default:
                    type: boolean
                  display:
                    properties:
                      description:
                        type: string
                      name:
                        type: string
                    type: object
                  plugin:
                    description: |-
                      Plugin will contain the datasource configuration.
                      The data typed is available in Cue.
                    properties:
                      kind:
                        type: string
                      spec:
                        x-kubernetes-preserve-unknown-fields: true
                    required:
                    - kind
                    - spec
                    type: object
                required:
                - default
                - plugin
                type: object
              instanceSelector:
                description: instanceSelector selects Perses instances where this
                  datasource will be created
                properties:
                  matchExpressions:
                    description: matchExpressions is a list of label selector requirements.
                      The requirements are ANDed.
                    items:
                      description: |-
                        A label selector requirement is a selector that contains values, a key, and an operator that
                        relates the key and values.
                      properties:
                        key:
                          description: key is the label key that the selector applies
                            to.
                          type: string
                        operator:
                          description: |-
                            operator represents a key's relationship to a set of values.
                            Valid operators are In, NotIn, Exists and DoesNotExist.
                          type: string
                        values:
                          description: |-
                            values is an array of string values. If the operator is In or NotIn,
                            the values array must be non-empty. If the operator is Exists or DoesNotExist,
                            the values array must be empty. This array is replaced during a strategic
                            merge patch.
                          items:
                            type: string
                          type: array
                          x-kubernetes-list-type: atomic
                      required:
                      - key
                      - operator
                      type: object
                    type: array
                    x-kubernetes-list-type: atomic
                  matchLabels:
                    additionalProperties:
                      type: string
                    description: |-
                      matchLabels is a map of {key,value} pairs. A single {key,value} in the matchLabels
                      map is equivalent to an element of matchExpressions, whose key field is "key", the
                      operator is "In", and the values array contains only "value". The requirements are ANDed.
                    type: object
                type: object
                x-kubernetes-map-type: atomic
            required:
            - config
            type: object
          status:
            description: status is the observed state of the PersesGlobalDatasource
              resource
            properties:
              conditions:
                description: conditions represent the latest observations of the PersesGlobalDatasource
                  resource state
                items:
                  description: Condition contains details for one aspect of the current
                    state of this API Resource.
                  properties:
                    lastTransitionTime:
                      description: |-
                        lastTransitionTime is the last time the condition transitioned from one status to another.
                        This should be when the underlying condition changed.  If that is not known, then using the time when the API field changed is acceptable.
                      format: date-time
                      type: string
                    message:
                      description: |-
                        message is a human readable message indicating details about the transition.
                        This may be an empty string.
                      maxLength: 32768
                      type: string
                    observedGeneration:
                      description: |-
                        observedGeneration represents the .metadata.generation that the condition was set based upon.
                        For instance, if .metadata.generation is currently 12, but the .status.conditions[x].observedGeneration is 9, the condition is out of date
                        with respect to the current state of the instance.
                      format: int64
                      minimum: 0
                      type: integer
                    reason:
                      description: |-
                        reason contains a programmatic identifier indicating the reason for the condition's last transition.
                        Producers of specific condition types may define expected values and meanings for this field,
                        and whether the values are considered a guaranteed API.
                        The value should be a CamelCase string.
                        This field may not be empty.
                      maxLength: 1024
                      minLength: 1
                      pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                      type: string
                    status:
                      description: status of the condition, one of True, False, Unknown.
                      enum:
                      - "True"
                      - "False"
                      - Unknown
                      type: string
                    type:
                      description: type of condition in CamelCase or in foo.example.com/CamelCase.
                      maxLength: 316
                      pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                      type: string
                  required:
                  - lastTransitionTime
                  - message
                  - reason
                  - status
                  - type
                  type: object
                type: array
                x-kubernetes-list-map-keys:
                - type
                x-kubernetes-list-type: map
            type: object
        required:
        - spec
        type: object
    served: true
    storage: true
    subresources:
      status: {}
